<!DOCTYPE html>
<m lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Community Page</title>
    <style>

        * {
            padding:0;
            margin: 0;
            box-sizing: border-box;
            list-style-type: none;
            text-decoration: none;
            font-family: 'Quicksand', sans-serif;
        }

    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
            rel="stylesheet"
    />
    <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
            rel="stylesheet"
    />
    <link rel="stylesheet" href="./stylesheets/style.css" />
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">


</head>
<body>
<div class="sidebar">
    <div class="sidebar-brand">
        <h2><span class="lab la-water"></span> ARTEMIS</h2>
    </div>
    <div class="sidebar-menu">
        <ul>
            <li>
                <a href="index.html"><span class="las la-home"></span>
                    <span>Home</span></a>
            </li>
            <li>
                <a href="drive.html"><span class="las la-water"></span>
                    <span>Drive</span></a>
            </li>
            <li>
                <a href="settings.html"><span class="las la-user"></span>
                    <span>Settings</span></a>
            </li>
            <li>
                <a href="battery.html"><span class="las la-battery-full"></span>
                    <span>Battery Updates</span></a>
            </li>
            <li>
                <a href="community.html" class="active"><span class="las la-bullhorn"></span>
                    <span>Community</span></a>
            </li>
        </ul>
    </div>
</div>

<div class="main-content">
    <header>
        <h1>
            <label for="">
                <span class="las la-bars"></span>
            </label>
            Community
        </h1>

        <div class="search-wrapper">
            <span class="las la-search"></span>
            <input type="search" placeholder="Search here"/>
        </div>

        <div class = "user-wrapper">
            <img src="./images/userImage.png" width="40px" height="40px" alt="">
            <div>
                <h4>Janine Santos</h4>
                <small>@janine_danielle</small>
            </div>
        </div>
    </header>

    <main>

        <div class="container">
            <button type="button" style="color: white; background-color: black; outline-color: black";
                    id="btnLoadTrips">Click to See Recent Community Trip Activity</button>
            <div class="jumbotron" id="output">
            </div>
        </div>



        <script>
            function CreateTable(data){
                let table = "";
                table =
                    '<table class="table table-fit"> \n' +
                    '   <thead>\n' +
                    '       <tr>\n' +
                    '           <th scope="col">Duration</th> \n'+
                    '           <th scope="col">Gallon(s) Collected</th> \n'+
                    '           <th scope="col">Trash Log</th> \n'+
                    '       </tr>\n' +
                    '   </thead>\n' +
                    '   <tbody>\n';

                for (let trip in data){
                    table +=
                        '       <tr>\n' +
                        '           <td>' + data[trip]["tripDuration"]+  '</td>\n' +
                        '           <td>' + data[trip]["trashGallon"]+  '</td>\n' +
                        '           <td>' + data[trip]["trashLog"]+  '</td>\n' +
                        '       </tr>\n';
                }

                table +=
                    '   </tbody>\n' +
                    '</table>\n'
                return table;
            }
            document.getElementById("btnLoadTrips").addEventListener("click", (event) =>{
                let url = "https://rocky-brushlands-41349.herokuapp.com/api/trips"
                let xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function (){
                    if (this.readyState == 4 && this.status == 200){
                        document.getElementById("output").innerHTML =
                            CreateTable(JSON.parse(this.responseText));
                    }
                };
                xhttp.open('GET', url, true);
                xhttp.send();
            });
        </script>
    </main>
</html>
</div>
</body>
</html>






